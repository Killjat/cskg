# ç½‘ç»œç©ºé—´æ‰«æå·¥å…· - å¿«é€Ÿå¼€å§‹

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
cyberspacescan/
â”œâ”€â”€ main.go              # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ config.go            # é…ç½®æ–‡ä»¶åŠ è½½
â”œâ”€â”€ scanner.go           # æ‰«ææ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ target.go            # ç›®æ ‡è§£æ
â”œâ”€â”€ output.go            # ç»“æœè¾“å‡º
â”œâ”€â”€ config.yaml          # é…ç½®æ–‡ä»¶
â”œâ”€â”€ targets.txt          # ç›®æ ‡æ–‡ä»¶
â”œâ”€â”€ go.mod               # Goæ¨¡å—æ–‡ä»¶
â”œâ”€â”€ README.md            # è¯¦ç»†æ–‡æ¡£
â””â”€â”€ å¿«é€Ÿå¼€å§‹.md          # æœ¬æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£… Go ä¾èµ–

```bash
cd /Users/jatsmith/CodeBuddy/cskg/cyberspacescan
go mod tidy
```

å¦‚æœé‡åˆ°ç½‘ç»œé—®é¢˜ï¼Œå¯ä»¥è®¾ç½®ä»£ç†ï¼š
```bash
export GOPROXY=https://goproxy.cn,direct
go mod tidy
```

### 2. é…ç½®æ‰«æç›®æ ‡

ç¼–è¾‘ `targets.txt`:

```bash
# å•ä¸ªIP
127.0.0.1

# å±€åŸŸç½‘æ®µ
192.168.1.0/24

# IPèŒƒå›´
10.0.0.1-10.0.0.10

# å…¬ç½‘IPï¼ˆéœ€è°¨æ…ä½¿ç”¨ï¼‰
8.8.8.8
```

### 3. é…ç½®æ‰«æç«¯å£

ç¼–è¾‘ `config.yaml`ï¼Œé»˜è®¤é…ç½®å·²åŒ…å«å¸¸è§ç«¯å£ï¼š

```yaml
ports:
  tcp:
    - 21    # FTP
    - 22    # SSH
    - 80    # HTTP
    - 443   # HTTPS
    - 3306  # MySQL
    - 6379  # Redis
  udp:
    - 53    # DNS
    - 161   # SNMP
```

### 4. è¿è¡Œæ‰«æ

```bash
# æ–¹æ³•1ï¼šç›´æ¥è¿è¡Œï¼ˆå¼€å‘æ¨¡å¼ï¼‰
go run .

# æ–¹æ³•2ï¼šç¼–è¯‘åè¿è¡Œ
go build -o scanner
./scanner

# æ–¹æ³•3ï¼šæŒ‡å®šå‚æ•°
go run . -t targets.txt -w 200 -timeout 3000
```

### 5. æŸ¥çœ‹ç»“æœ

æ‰«æç»“æœä¿å­˜åœ¨ `results/` ç›®å½•ï¼š

```bash
# æŸ¥çœ‹JSONç»“æœ
cat results/scan_result_*.json

# æŸ¥çœ‹CSVç»“æœ
cat results/scan_result_*.csv

# æŸ¥çœ‹å“åº”åŒ…
ls -la results/responses/
```

## ğŸ“‹ å‘½ä»¤è¡Œå‚æ•°

```bash
-c string      é…ç½®æ–‡ä»¶è·¯å¾„ (é»˜è®¤: config.yaml)
-t string      ç›®æ ‡æ–‡ä»¶è·¯å¾„ (é»˜è®¤: targets.txt)
-o string      è¾“å‡ºç›®å½• (é»˜è®¤: ./results)
-w int         å¹¶å‘åç¨‹æ•° (é»˜è®¤: 100)
-timeout int   è¶…æ—¶æ—¶é—´ï¼Œæ¯«ç§’ (é»˜è®¤: 2000)
```

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: æ‰«ææœ¬åœ°ä¸»æœº

```bash
# targets.txt
127.0.0.1

# è¿è¡Œ
go run .
```

### ç¤ºä¾‹ 2: å¿«é€Ÿæ‰«æå†…ç½‘

```bash
# targets.txt
192.168.1.0/24

# ä½¿ç”¨æ›´é«˜å¹¶å‘å’Œæ›´çŸ­è¶…æ—¶
go run . -w 500 -timeout 1000
```

### ç¤ºä¾‹ 3: æ‰«æç‰¹å®šç«¯å£

ä¿®æ”¹ `config.yaml`:
```yaml
ports:
  tcp:
    - 80
    - 443
    - 8080
```

è¿è¡Œï¼š
```bash
go run . -t targets.txt
```

### ç¤ºä¾‹ 4: ä¿å­˜è¯¦ç»†å“åº”

ç¡®ä¿ `config.yaml` ä¸­è®¾ç½®ï¼š
```yaml
output:
  save_response: true
```

è¿è¡Œæ‰«æåï¼Œå“åº”åŒ…ä¿å­˜åœ¨ï¼š
```
results/responses/<IP>/<IP>_<PORT>_<PROTOCOL>.bin
```

## ğŸ” ç»“æœè§£æ

### JSON æ ¼å¼
```json
{
  "scan_time": "20240107_153045",
  "total": 10,
  "alive": 5,
  "results": [
    {
      "IP": "192.168.1.1",
      "IsAlive": true,
      "TCPPorts": [
        {
          "Port": 80,
          "Protocol": "tcp",
          "State": "open",
          "Service": "HTTP",
          "Banner": "HTTP/1.1 200 OK\r\n...",
          "Response": "..."
        }
      ]
    }
  ]
}
```

### CSV æ ¼å¼
```
IPåœ°å€,ç«¯å£,åè®®,çŠ¶æ€,æœåŠ¡,Banner
192.168.1.1,80,tcp,open,HTTP,HTTP/1.1 200 OK
192.168.1.1,443,tcp,open,HTTPS,
```

## âš ï¸ é‡è¦æç¤º

1. **æ³•å¾‹åˆè§„**: ä»…åœ¨æˆæƒèŒƒå›´å†…ä½¿ç”¨
2. **æµ‹è¯•å»ºè®®**: å…ˆåœ¨æœ¬åœ°æˆ–å†…ç½‘æµ‹è¯•
3. **æ€§èƒ½è°ƒä¼˜**: æ ¹æ®ç½‘ç»œæƒ…å†µè°ƒæ•´å¹¶å‘æ•°å’Œè¶…æ—¶
4. **æ•°æ®å¤‡ä»½**: æ‰«æç»“æœä¼šè¦†ç›–åŒåæ–‡ä»¶

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æç¤ºæƒé™ä¸è¶³
A: æŸäº›ç«¯å£æ‰«æéœ€è¦ root æƒé™ï¼š
```bash
sudo go run .
```

### Q2: è¿æ¥è¶…æ—¶è¿‡å¤š
A: å¢åŠ è¶…æ—¶æ—¶é—´ï¼š
```bash
go run . -timeout 5000
```

### Q3: å†…å­˜å ç”¨è¿‡é«˜
A: å‡å°‘å¹¶å‘æ•°ï¼š
```bash
go run . -w 50
```

### Q4: UDP ç«¯å£æ˜¾ç¤º open|filtered
A: è¿™æ˜¯ UDP æ‰«æçš„æ­£å¸¸çŠ¶æ€ï¼Œè¡¨ç¤ºå¯èƒ½å¼€æ”¾æˆ–è¢«è¿‡æ»¤

## ğŸ“Š æ€§èƒ½å‚è€ƒ

| åœºæ™¯           | å¹¶å‘æ•° | è¶…æ—¶(ms) | é€Ÿåº¦            |
|----------------|--------|----------|-----------------|
| æœ¬åœ°æ‰«æ       | 500    | 500      | å¾ˆå¿«            |
| å†…ç½‘æ‰«æ       | 200    | 1000     | å¿«              |
| å…¬ç½‘æ‰«æ       | 100    | 2000     | ä¸­ç­‰            |
| å¤§è§„æ¨¡æ‰«æ     | 50     | 3000     | ç¨³å®šä½†è¾ƒæ…¢      |

## ğŸ”§ é«˜çº§åŠŸèƒ½

### 1. è‡ªå®šä¹‰ç«¯å£èŒƒå›´

åˆ›å»ºæ–°çš„é…ç½®æ–‡ä»¶ `custom.yaml`:
```yaml
ports:
  tcp:
    # Web æœåŠ¡
    - 80
    - 443
    - 8000
    - 8080
    - 8443
    # æ•°æ®åº“
    - 3306
    - 5432
    - 27017
```

è¿è¡Œï¼š
```bash
go run . -c custom.yaml
```

### 2. åˆ†æ‰¹æ‰«æå¤§é‡ç›®æ ‡

å°†ç›®æ ‡åˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼š
```bash
# æ‰¹æ¬¡1
go run . -t targets_batch1.txt -o results/batch1

# æ‰¹æ¬¡2
go run . -t targets_batch2.txt -o results/batch2
```

### 3. å®šæ—¶æ‰«æ

ä½¿ç”¨ cron æˆ–ç³»ç»Ÿå®šæ—¶ä»»åŠ¡ï¼š
```bash
# crontab -e
0 2 * * * cd /path/to/scanner && ./scanner
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æŸ¥çœ‹ README.md è¯¦ç»†æ–‡æ¡£ã€‚

---

**ç¥æ‰«ææ„‰å¿«ï¼** ğŸ¯
