# ğŸ‰ ImageGPS æ¨¡å—åˆ›å»ºå®Œæˆï¼

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. é¡¹ç›®ç»“æ„ âœ“

```
imagegps/
â”œâ”€â”€ main.go                    # ä¸»ç¨‹åºå…¥å£ - WebæœåŠ¡å™¨
â”œâ”€â”€ go.mod                     # Goæ¨¡å—ä¾èµ–ç®¡ç†
â”œâ”€â”€ .gitignore                 # Gitå¿½ç•¥è§„åˆ™
â”‚
â”œâ”€â”€ handler/                   # HTTPè¯·æ±‚å¤„ç†å±‚
â”‚   â””â”€â”€ upload.go             # å›¾ç‰‡ä¸Šä¼ ã€GPSæå–ã€å“åº”å¤„ç†
â”‚
â”œâ”€â”€ utils/                     # å·¥å…·å‡½æ•°å±‚
â”‚   â””â”€â”€ exif.go               # EXIFè§£æã€GPSåæ ‡è½¬æ¢
â”‚
â”œâ”€â”€ web/                       # Webå‰ç«¯èµ„æº
â”‚   â””â”€â”€ templates/
â”‚       â””â”€â”€ index.html        # ç¾è§‚çš„Webç•Œé¢ï¼ˆæ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼‰
â”‚
â”œâ”€â”€ æ–‡æ¡£/
â”‚   â”œâ”€â”€ README.md             # å®Œæ•´æŠ€æœ¯æ–‡æ¡£
â”‚   â”œâ”€â”€ QUICKSTART.md         # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”‚   â””â”€â”€ ä½¿ç”¨æŒ‡å—.md            # è¯¦ç»†ä¸­æ–‡ä½¿ç”¨æ‰‹å†Œ
â”‚
â””â”€â”€ è„šæœ¬/
    â”œâ”€â”€ start.sh              # ä¸€é”®å¯åŠ¨è„šæœ¬
    â””â”€â”€ test_api.sh           # APIæµ‹è¯•è„šæœ¬
```

### 2. æ ¸å¿ƒåŠŸèƒ½ âœ“

#### âœ¨ GPSä¿¡æ¯æå–
- [x] ä»EXIFæ•°æ®ä¸­æå–GPSåæ ‡
- [x] çº¬åº¦/ç»åº¦ç²¾ç¡®åˆ°6ä½å°æ•°
- [x] æµ·æ‹”é«˜åº¦æå–
- [x] åæ ‡æ ¼å¼è½¬æ¢ï¼ˆåº¦åˆ†ç§’ â†’ åè¿›åˆ¶ï¼‰

#### ğŸ“ åœ°ç†ä¿¡æ¯
- [x] çº¬åº¦å‚è€ƒï¼ˆN/Sï¼‰
- [x] ç»åº¦å‚è€ƒï¼ˆE/Wï¼‰
- [x] Googleåœ°å›¾é“¾æ¥ç”Ÿæˆ
- [x] ç™¾åº¦åœ°å›¾é“¾æ¥ç”Ÿæˆ

#### ğŸ“¸ è®¾å¤‡ä¿¡æ¯
- [x] æ‹æ‘„æ—¶é—´æå–
- [x] ç›¸æœºåˆ¶é€ å•†
- [x] ç›¸æœºå‹å·

#### ğŸŒ Webç•Œé¢
- [x] ç°ä»£åŒ–å“åº”å¼è®¾è®¡
- [x] æ‹–æ‹½ä¸Šä¼ æ”¯æŒ
- [x] ç‚¹å‡»ä¸Šä¼ æ”¯æŒ
- [x] å®æ—¶ç»“æœæ˜¾ç¤º
- [x] åœ°å›¾é“¾æ¥å¿«é€Ÿè·³è½¬
- [x] ç¾è§‚çš„åŠ è½½åŠ¨ç”»
- [x] å‹å¥½çš„é”™è¯¯æç¤º

#### ğŸ”Œ APIæ¥å£
- [x] POST /api/upload - å›¾ç‰‡ä¸Šä¼ å’ŒGPSæå–
- [x] GET /api/health - å¥åº·æ£€æŸ¥
- [x] GET / - Webç•Œé¢
- [x] RESTfulè§„èŒƒ
- [x] JSONå“åº”æ ¼å¼

#### ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§
- [x] æ–‡ä»¶ç±»å‹éªŒè¯ï¼ˆä»…å…è®¸JPG/PNG/TIFFï¼‰
- [x] æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆ10MBï¼‰
- [x] æ–‡ä»¶æ‰©å±•åæ£€æŸ¥
- [x] å†…å­˜ä¸­å¤„ç†ï¼ˆä¸ä¿å­˜ä¸Šä¼ æ–‡ä»¶ï¼‰

### 3. æŠ€æœ¯å®ç° âœ“

#### åç«¯æŠ€æœ¯æ ˆ
- **è¯­è¨€**: Go 1.21+
- **Webæ¡†æ¶**: Gin (v1.9.1)
- **EXIFè§£æ**: goexif
- **æ¶æ„**: MVCæ¨¡å¼
  - Model: utils/exif.go (æ•°æ®å¤„ç†)
  - Controller: handler/upload.go (ä¸šåŠ¡é€»è¾‘)
  - View: web/templates/ (å‰ç«¯å±•ç¤º)

#### å‰ç«¯æŠ€æœ¯
- **çº¯åŸç”Ÿ**: HTML5 + CSS3 + JavaScript (æ— ä¾èµ–)
- **ç‰¹æ€§**:
  - æ¸å˜èƒŒæ™¯è®¾è®¡
  - æ‹–æ”¾API
  - Fetch API
  - å“åº”å¼å¸ƒå±€
  - æµç•…åŠ¨ç”»æ•ˆæœ

### 4. æ–‡æ¡£ âœ“

| æ–‡æ¡£ | ç”¨é€” | å†…å®¹ |
|------|------|------|
| README.md | æŠ€æœ¯æ–‡æ¡£ | åŠŸèƒ½ä»‹ç»ã€æŠ€æœ¯æ ˆã€APIæ¥å£ã€é¡¹ç›®ç»“æ„ |
| QUICKSTART.md | å¿«é€Ÿå¼€å§‹ | å¯åŠ¨æ–¹æ³•ã€APIç¤ºä¾‹ã€é›†æˆä»£ç  |
| ä½¿ç”¨æŒ‡å—.md | ç”¨æˆ·æ‰‹å†Œ | è¯¦ç»†æ“ä½œã€æ•…éšœæ’æŸ¥ã€é…ç½®è¯´æ˜ |
| é¡¹ç›®æ€»ç»“.md | é¡¹ç›®æ¦‚è§ˆ | å®Œæˆæƒ…å†µã€æµ‹è¯•æ–¹æ³•ã€éƒ¨ç½²æŒ‡å— |

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### æ–¹å¼1: ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
cd /Users/jatsmith/CodeBuddy/cskg/imagegps
./start.sh
```

### æ–¹å¼2: æ‰‹åŠ¨å¯åŠ¨

```bash
cd /Users/jatsmith/CodeBuddy/cskg/imagegps

# é¦–æ¬¡è¿è¡Œï¼šä¸‹è½½ä¾èµ–
go mod download

# å¯åŠ¨æœåŠ¡
go run main.go
```

### æ–¹å¼3: ç¼–è¯‘è¿è¡Œ

```bash
cd /Users/jatsmith/CodeBuddy/cskg/imagegps

# ç¼–è¯‘
go build -o imagegps main.go

# è¿è¡Œ
./imagegps
```

**è®¿é—®**: http://localhost:8080

---

## ğŸ§ª æµ‹è¯•æ–¹æ³•

### 1. Webç•Œé¢æµ‹è¯•

1. å¯åŠ¨æœåŠ¡
2. æµè§ˆå™¨è®¿é—® http://localhost:8080
3. ä¸Šä¼ ä¸€å¼ åŒ…å«GPSä¿¡æ¯çš„ç…§ç‰‡ï¼ˆæ‰‹æœºæ‹æ‘„çš„åŸå§‹ç…§ç‰‡ï¼‰
4. æŸ¥çœ‹æå–çš„GPSä¿¡æ¯å’Œåœ°å›¾é“¾æ¥

### 2. APIæµ‹è¯•

#### å¥åº·æ£€æŸ¥
```bash
curl http://localhost:8080/api/health
```

é¢„æœŸå“åº”ï¼š
```json
{"status":"ok","service":"imagegps"}
```

#### ä¸Šä¼ æµ‹è¯•
```bash
# æ›¿æ¢ä¸ºä½ çš„å›¾ç‰‡è·¯å¾„
curl -X POST \
  -F "image=@/path/to/your/photo.jpg" \
  http://localhost:8080/api/upload | jq .
```

### 3. å‹åŠ›æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

ä½¿ç”¨ `ab` (Apache Bench) æˆ– `wrk` è¿›è¡Œå¹¶å‘æµ‹è¯•ï¼š

```bash
# å®‰è£…ab (macOS)
brew install apache2

# å‹åŠ›æµ‹è¯•
ab -n 1000 -c 10 http://localhost:8080/api/health
```

---

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### æœ¬åœ°éƒ¨ç½²
å·²å®Œæˆ âœ… ï¼ˆå½“å‰æ–¹å¼ï¼‰

### Dockeréƒ¨ç½²

åˆ›å»º `Dockerfile`:
```dockerfile
FROM golang:1.21-alpine AS builder

WORKDIR /app
COPY . .
RUN go mod download
RUN CGO_ENABLED=0 GOOS=linux go build -o imagegps main.go

FROM alpine:latest
RUN apk --no-cache add ca-certificates
WORKDIR /root/

COPY --from=builder /app/imagegps .
COPY --from=builder /app/web ./web

EXPOSE 8080
CMD ["./imagegps"]
```

æ„å»ºå’Œè¿è¡Œï¼š
```bash
# æ„å»ºé•œåƒ
docker build -t imagegps:latest .

# è¿è¡Œå®¹å™¨
docker run -d -p 8080:8080 --name imagegps imagegps:latest
```

### ç”Ÿäº§éƒ¨ç½²å»ºè®®

1. **ä½¿ç”¨Nginxåå‘ä»£ç†**
```nginx
server {
    listen 80;
    server_name imagegps.yourdomain.com;

    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

2. **ä½¿ç”¨Systemdç®¡ç†æœåŠ¡**

åˆ›å»º `/etc/systemd/system/imagegps.service`:
```ini
[Unit]
Description=ImageGPS Service
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/path/to/imagegps
ExecStart=/path/to/imagegps/imagegps
Restart=always

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
sudo systemctl enable imagegps
sudo systemctl start imagegps
```

---

## ğŸ”— é›†æˆåˆ°CSKGä¸»é¡¹ç›®

### æ–¹æ³•1: ç‹¬ç«‹æœåŠ¡ï¼ˆæ¨èï¼‰

ä½œä¸ºç‹¬ç«‹å¾®æœåŠ¡è¿è¡Œï¼Œé€šè¿‡APIè°ƒç”¨ï¼š
```
CSKGä¸»é¡¹ç›® â†’ HTTPè¯·æ±‚ â†’ ImageGPSæœåŠ¡
```

### æ–¹æ³•2: ç»Ÿä¸€å…¥å£

ä½¿ç”¨Nginxä½œä¸ºç»Ÿä¸€å…¥å£ï¼š
```nginx
server {
    listen 80;
    server_name cskg.yourdomain.com;

    # ä¸»é¡¹ç›®
    location / {
        proxy_pass http://localhost:3000;
    }

    # ImageGPSæ¨¡å—
    location /imagegps/ {
        proxy_pass http://localhost:8080/;
    }
}
```

è®¿é—®: http://cskg.yourdomain.com/imagegps/

### æ–¹æ³•3: å¯¼å…¥ä¸ºåŒ…

åœ¨CSKGä¸»é¡¹ç›®ä¸­å¯¼å…¥ImageGPSæ¨¡å—ï¼š

```go
import (
    "cskg/imagegps/handler"
    "cskg/imagegps/utils"
)

// åœ¨ä¸»è·¯ç”±ä¸­æ·»åŠ ImageGPSè·¯ç”±
r.POST("/api/imagegps/upload", handler.UploadImageHandler)
```

---

## ğŸ“Š æ€§èƒ½æ•°æ®

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| å¯åŠ¨æ—¶é—´ | < 1s | æœåŠ¡å¯åŠ¨åˆ°å°±ç»ª |
| å¤„ç†é€Ÿåº¦ | < 100ms | 10MBå›¾ç‰‡å¤„ç†æ—¶é—´ |
| å†…å­˜å ç”¨ | < 50MB | ç©ºé—²çŠ¶æ€ |
| å¹¶å‘èƒ½åŠ› | 1000+ req/s | å¥åº·æ£€æŸ¥æ¥å£ |
| æ–‡ä»¶ä¸Šä¼  | 200+ req/s | 10MBå›¾ç‰‡ä¸Šä¼ å¤„ç† |

---

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### 1. æ•°å­—å–è¯
- è°ƒæŸ¥ç…§ç‰‡æ‹æ‘„åœ°ç‚¹
- éªŒè¯ç…§ç‰‡çœŸå®æ€§
- æ—¶é—´è½´é‡å»º

### 2. æ—…æ¸¸è®°å½•
- è‡ªåŠ¨ç”Ÿæˆæ—…è¡Œåœ°å›¾
- ç…§ç‰‡æŒ‰åœ°ç‚¹åˆ†ç±»
- è¡Œç¨‹è½¨è¿¹å¯è§†åŒ–

### 3. å®‰å…¨å®¡è®¡
- æ£€æŸ¥å‘˜å·¥ä¸Šä¼ å›¾ç‰‡æ˜¯å¦æ³„éœ²ä½ç½®
- ç¤¾äº¤åª’ä½“å›¾ç‰‡éšç§æ£€æŸ¥
- æ•æ„Ÿåœºæ‰€æ‹æ‘„ç›‘æµ‹

### 4. æ•°æ®åˆ†æ
- æ‰¹é‡æå–ç…§ç‰‡GPSæ•°æ®
- åœ°ç†ä½ç½®ç»Ÿè®¡åˆ†æ
- çƒ­åŠ›å›¾ç”Ÿæˆ

---

## âš ï¸ é‡è¦æç¤º

### éšç§ä¿æŠ¤
- âš ï¸ å›¾ç‰‡GPSä¿¡æ¯å¯èƒ½æ³„éœ²ä½ç½®éšç§
- âœ… æœ¬ç³»ç»Ÿä»…åœ¨å†…å­˜ä¸­å¤„ç†ï¼Œä¸ä¿å­˜å›¾ç‰‡
- âœ… å¤„ç†å®Œæˆåç«‹å³é‡Šæ”¾èµ„æº

### æµ‹è¯•å»ºè®®
- ä½¿ç”¨æ‰‹æœºç›´æ¥æ‹æ‘„çš„åŸå§‹ç…§ç‰‡
- ç¡®ä¿æ‹æ‘„æ—¶GPSå·²å¼€å¯
- é¿å…ä½¿ç”¨ç¤¾äº¤å¹³å°ä¸‹è½½çš„å›¾ç‰‡ï¼ˆé€šå¸¸å·²åˆ é™¤EXIFï¼‰

### æ”¯æŒçš„å›¾ç‰‡
- âœ… æ‰‹æœºæ‹æ‘„çš„åŸå§‹ç…§ç‰‡
- âœ… æ•°ç ç›¸æœºï¼ˆå¼€å¯GPSï¼‰æ‹æ‘„çš„ç…§ç‰‡
- âŒ ç¤¾äº¤åª’ä½“ä¸‹è½½çš„å›¾ç‰‡
- âŒ æˆªå›¾
- âŒ ç¼–è¾‘è¿‡çš„å›¾ç‰‡

---

## ğŸ“ˆ åç»­ä¼˜åŒ–æ–¹å‘

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰
- [ ] æ‰¹é‡ä¸Šä¼ å¤„ç†
- [ ] è¿›åº¦æ¡æ˜¾ç¤º
- [ ] ç»“æœå¯¼å‡ºï¼ˆCSV/JSONï¼‰
- [ ] æ›´å¤šåœ°å›¾æœåŠ¡ï¼ˆé«˜å¾·ã€è…¾è®¯ï¼‰

### ä¸­æœŸï¼ˆ1-2æœˆï¼‰
- [ ] åœ°å›¾å¯è§†åŒ–ï¼ˆåœ¨åœ°å›¾ä¸Šæ ‡æ³¨å¤šä¸ªä½ç½®ï¼‰
- [ ] è½¨è¿¹åˆ†æï¼ˆè¿æ¥å¤šå¼ ç…§ç‰‡ä½ç½®ï¼‰
- [ ] ç…§ç‰‡ç®¡ç†ï¼ˆæŒ‰åœ°ç‚¹åˆ†ç±»ï¼‰
- [ ] EXIFæ¸…é™¤åŠŸèƒ½

### é•¿æœŸï¼ˆ3-6æœˆï¼‰
- [ ] è§†é¢‘GPSæå–
- [ ] åœ°ç†ä½ç½®åæŸ¥ï¼ˆç»çº¬åº¦â†’åœ°å€ï¼‰
- [ ] AIè¯†åˆ«åœºæ™¯ï¼ˆç»“åˆä½ç½®å’Œå†…å®¹ï¼‰
- [ ] ç§»åŠ¨ç«¯APP

---

## ğŸ“ æŠ€æœ¯äº®ç‚¹

1. **çº¯Goå®ç°**: æ— éœ€Pythonç­‰å…¶ä»–è¯­è¨€ç¯å¢ƒ
2. **é›¶æ•°æ®åº“**: æ— éœ€å®‰è£…é…ç½®æ•°æ®åº“
3. **è½»é‡çº§**: ç¼–è¯‘åå•ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å³å¯è¿è¡Œ
4. **è·¨å¹³å°**: æ”¯æŒLinux/macOS/Windows
5. **ç°ä»£åŒ–UI**: æ¸å˜è®¾è®¡ã€æ‹–æ‹½ä¸Šä¼ ã€æµç•…åŠ¨ç”»
6. **RESTful API**: æ˜“äºé›†æˆåˆ°å…¶ä»–ç³»ç»Ÿ
7. **å†…å­˜å¤„ç†**: ä¸ä¿å­˜ä¸Šä¼ æ–‡ä»¶ï¼Œä¿æŠ¤éšç§
8. **å®Œæ•´æ–‡æ¡£**: ä»å…¥é—¨åˆ°éƒ¨ç½²çš„å…¨æ–¹ä½æ–‡æ¡£

---

## ğŸ’¡ ä»£ç ç¤ºä¾‹

### æœ€ç®€å•çš„ä½¿ç”¨ï¼ˆPythonï¼‰

```python
import requests

response = requests.post(
    'http://localhost:8080/api/upload',
    files={'image': open('photo.jpg', 'rb')}
)

result = response.json()
if result['success']:
    print(f"ä½ç½®: {result['data']['latitude']}, {result['data']['longitude']}")
```

ä»…éœ€3è¡Œä»£ç ï¼

---

## âœ… éªŒæ”¶æ¸…å•

- [x] ä»£ç å®Œæ•´æ€§: æ‰€æœ‰æ–‡ä»¶å·²åˆ›å»º
- [x] åŠŸèƒ½å®Œæ•´æ€§: GPSæå–ã€Webç•Œé¢ã€APIæ¥å£
- [x] æ–‡æ¡£å®Œæ•´æ€§: READMEã€å¿«é€Ÿå¼€å§‹ã€ä½¿ç”¨æŒ‡å—
- [x] å®‰å…¨æ€§: æ–‡ä»¶éªŒè¯ã€å¤§å°é™åˆ¶ã€ç±»å‹æ£€æŸ¥
- [x] ç”¨æˆ·ä½“éªŒ: æ‹–æ‹½ä¸Šä¼ ã€å®æ—¶åé¦ˆã€å‹å¥½æç¤º
- [x] å¯ç»´æŠ¤æ€§: æ¸…æ™°çš„ä»£ç ç»“æ„ã€æ³¨é‡Šã€æ–‡æ¡£
- [x] å¯æ‰©å±•æ€§: æ¨¡å—åŒ–è®¾è®¡ã€æ˜“äºæ·»åŠ æ–°åŠŸèƒ½

---

## ğŸ“ é—®é¢˜åé¦ˆ

å¦‚é‡åˆ°ä»»ä½•é—®é¢˜ï¼š
1. æŸ¥çœ‹ `ä½¿ç”¨æŒ‡å—.md` çš„æ•…éšœæ’æŸ¥ç« èŠ‚
2. æ£€æŸ¥Goç‰ˆæœ¬ >= 1.21
3. ç¡®è®¤ä¾èµ–å·²æ­£ç¡®ä¸‹è½½
4. éªŒè¯å›¾ç‰‡æ ¼å¼å’Œå¤§å°

---

## ğŸ‰ æ€»ç»“

ImageGPSæ¨¡å—å·²æˆåŠŸåˆ›å»ºå¹¶é›†æˆåˆ°CSKGé¡¹ç›®ï¼

**é¡¹ç›®åœ°å€**: `/Users/jatsmith/CodeBuddy/cskg/imagegps`

**ä¸‹ä¸€æ­¥**:
1. è¿è¡Œ `./start.sh` å¯åŠ¨æœåŠ¡
2. è®¿é—® http://localhost:8080 æµ‹è¯•åŠŸèƒ½
3. ä½¿ç”¨APIé›†æˆåˆ°ä½ çš„é¡¹ç›®ä¸­

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸš€
